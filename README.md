# max-patcher-privacy - Патч для приватности

Этот проект содержит автоматизированный патч для удаления шпионского SDK `my.tracker` (возможно и другие) из приложения max.

## О проекте

В связи с требованием о предустановке российского ПО, это приложение поставляется на многих устройствах. Внутри него находится трекер `my.tracker` (принадлежит VK), который собирает огромное количество данных о пользователе и устройстве.

Цель этого проекта предоставить версию приложения, в которой шпионские функции трекера полностью отключены. Процесс полностью автоматизирован с помощью GitHub Actions, и вы можете собрать APK самостоятельно.

## Как это работает

Процесс полностью автоматизирован. Воркфлоу GitHub делает следующее:
1.  **Декомпиляция**: Оригинальный APK из этого репозитория распаковывается с помощью `apktool`.
2.  **Патчинг**: Python-скрипт (`scripts/patcher.py`) находит и заменяет участки Smali-кода, отвечающие за сбор данных, на "пустышки". Патчи находятся в папке `patches`.
3.  **Сборка**: Модифицированные файлы собираются обратно в APK с помощью `apktool`.
4.  **Выравнивание и Подпись**: APK выравнивается (`zipalign`) и подписывается временным ключом, который генерируется во время сборки.

## Что конкретно делает патч?

Патч отключает ключевые шпионские функции SDK `my.tracker`:

*   **Сбор личных данных**: Все методы `set...` для отправки PII (возраст, пол, email, телефон, ID соцсетей и т.д.) в `MyTrackerParams.smali` заменены на пустые. Они просто возвращают управление, ничего не делая.
*   **Проверка на root-доступ**: Функция проверки (`obfuscated/r$a.smali`) всегда возвращает `false`, так что трекер думает, что у вас нет root-прав.
*   **Сбор списка установленных приложений**: Функция (`obfuscated/f.smali`) теперь всегда возвращает пустой список.
*   **Отправка данных**: Все сетевые запросы к серверам трекера (`tracker-api.vk-analytics.ru`) блокируются на уровне кода (`obfuscated/b0.smali` и `m0.smali`). Данные просто не уходят с устройства.

## Доказательства

Я приложу скриншоты из JEB Pro, которые показывают код до и после применения патча на примере одного из методов. Это наглядно демонстрирует, как опасный код заменяется на  "пустышку".

**До (Оригинальный код `setCustomUserId`):**


**После (Код после патча):**


## Как собрать APK самостоятельно

Вы не должны доверять APK-файлам из интернета, включая мои. Поэтому вы можете (и должны) собрать его самостоятельно, используя открытый код этого репозитория.

1.  Сделайте форк этого репозитория.
2.  Перейдите во вкладку "Actions" в вашем форке.
3.  Найдите воркфлоу с названием "Build Patched APK" и запустите его (кнопка `Run workflow`).
4.  После завершения работы (обычно 2-3 минуты), в артефактах сборки вы найдете zip-архив с готовым `patched-app-release.apk`.

**Важно**: Так как приложение подписано другим ключом (не ключом разработчика), вам нужно будет **удалить оригинальную версию приложения** перед установкой этой. Обновить поверх не получится.

## Дисклеймер

Этот проект создан исключительно в образовательных и исследовательских целях для демонстрации техник обратной инженерии и автоматизации. Он не связан с разработчиками оригинального приложения. Вы используете его на свой страх и риск.